---
import Layout from "../layouts/Layout.astro";
import "../styles/global.css";
import Header from "../components/Header.astro";
import Main from "../components/Main.astro";
import Footer from "../components/Footer.astro";

const BACKEND_PORT = 3001;
const BACKEND_URL_SERVER = `http://localhost:${BACKEND_PORT}/api/generate-code`; // Renombrado para evitar confusi칩n
---

<Layout>
  <Header title="Code Jay"/>
  <Main />
  <Footer />

  {/* 
    Este script inline es solo para definir la variable global BACKEND_URL.
    Se ejecuta ANTES que el script importado.
  */}
  <script define:vars={{ backendUrlForClient: BACKEND_URL_SERVER }} is:inline>
    window.BACKEND_URL = backendUrlForClient;
    // console.log('BACKEND_URL set on window:', window.BACKEND_URL); // Para depuraci칩n
  </script>

  {/* 
    Importar el script TypeScript. Astro lo procesar치 y lo empaquetar치.
    Este script ahora puede usar TypeScript sin problemas.
  */}
  <script src="../scripts/main-ui-logic.ts"></script>
</Layout>
